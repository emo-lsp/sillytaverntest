<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¦»æ‚¦è®ºå› - ä¼´ä¾£å®šåˆ¶</title>
    <link
      rel="stylesheet"
      href="https://fontsapi.zeoseven.com/292/main/result.css"
    />
  </head>

  <body>
    <style>
      :root {
        --dark-red: #c92a2a;
        --blood-red: #e03131;
        --light-red: #ff6b6b;
        --dark-gray: #1a1a1a;
        --gray: #2a2a2a;
        --light-gray: #3a3a3a;
        --text-main: #e0e0e0;
        --text-dim: #999;
        --text-dimmer: #666;
        --gold: #ffd700;
        --silver: #c0c0c0;
        --border: rgba(220, 20, 60, 0.2);
        --hover-bg: rgba(220, 20, 60, 0.08);
      }

      [data-theme="light"] {
        --dark-red: #c92a2a;
        --blood-red: #e03131;
        --light-red: #ff6b6b;
        --dark-gray: #f5f5f5;
        --gray: #ececec;
        --light-gray: #e0e0e0;
        --text-main: #2a2a2a;
        --text-dim: #666;
        --text-dimmer: #999;
        --gold: #d97706;
        --silver: #6b7280;
        --border: rgba(220, 20, 60, 0.15);
        --hover-bg: rgba(220, 20, 60, 0.05);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans SC", -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        color: var(--text-main);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .container {
        width: 100%;
        max-width: 820px;
        margin: 0 auto;
        background: var(--dark-gray);
        font-size: 14px;
        position: relative;
      }

      .header {
        background: var(--blood-red);
        padding: 10px 16px;
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid var(--border);
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }

      .header h1 {
        font-size: 1em;
        font-weight: 600;
        color: #fff;
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .header p {
        display: none;
      }

      .theme-toggle {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: #fff;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
        font-size: 0.85em;
        font-weight: 500;
        outline: none;
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .content {
        padding: 16px;
      }

      .page {
        display: none;
        animation: fadeIn 0.5s ease-out;
      }

      .page.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .page-title {
        font-size: 1.05em;
        font-weight: 600;
        color: var(--blood-red);
        margin-bottom: 12px;
        text-align: center;
      }

      .page-desc {
        color: var(--text-dim);
        text-align: center;
        margin-bottom: 20px;
        line-height: 1.5;
        font-size: 0.9em;
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
      }

      .option-card {
        background: var(--light-gray);
        border: 2px solid transparent;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease-out;
        position: relative;
      }

      .option-card:hover {
        border-color: var(--blood-red);
        transform: translateY(-3px);
        box-shadow: 0 4px 15px var(--hover-bg);
      }

      .option-card.selected {
        background: linear-gradient(135deg, var(--blood-red), var(--dark-red));
        border-color: var(--gold);
        box-shadow: 0 0 20px rgba(220, 20, 60, 0.5);
      }

      .option-card .icon {
        font-size: 2em;
        margin-bottom: 8px;
      }

      .option-card .label {
        font-size: 0.9em;
        font-weight: 500;
        color: var(--text-main);
      }

      .option-card.selected .label {
        color: #fff;
      }

      .option-card .desc {
        font-size: 0.75em;
        color: var(--text-dim);
        margin-top: 6px;
        line-height: 1.3;
      }

      .option-card.selected .desc {
        color: rgba(255, 255, 255, 0.8);
      }

      .custom-input {
        width: 100%;
        background: var(--dark-gray);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 10px;
        color: var(--text-main);
        font-size: 0.9em;
        margin-top: 8px;
      }

      .custom-input:focus {
        outline: none;
        border-color: var(--blood-red);
      }

      .progress-bar {
        width: 100%;
        height: 5px;
        background: var(--light-gray);
        border-radius: 3px;
        margin-bottom: 20px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--blood-red), var(--light-red));
        transition: width 0.5s ease-out;
      }

      .nav-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
        padding: 12px 0;
      }

      .nav-buttons-stacked {
        display: flex;
        flex-direction: column;
        gap: 12px;
        align-items: center;
        padding: 12px 0;
      }

      .nav-buttons-row {
        display: flex;
        gap: 12px;
        justify-content: center;
      }

      .btn {
        padding: 10px 25px;
        border: none;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease-out;
      }

      .btn-prev {
        background: var(--light-gray);
        color: var(--text-main);
      }

      .btn-prev:hover {
        background: var(--hover-bg);
      }

      .btn-next {
        background: linear-gradient(135deg, var(--blood-red), var(--dark-red));
        color: #fff;
      }

      .btn-next:hover {
        box-shadow: 0 0 15px rgba(220, 20, 60, 0.5);
      }

      .btn-submit {
        background: linear-gradient(135deg, var(--gold), #ff8c00);
        color: #000;
        font-weight: 600;
      }

      .btn-submit:hover {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .summary-section {
        background: var(--light-gray);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
      }

      .summary-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid var(--border);
        font-size: 0.9em;
      }

      .summary-item:last-child {
        border-bottom: none;
      }

      .summary-item.hidden {
        display: none;
      }

      .summary-label {
        color: var(--text-dim);
      }

      .summary-value {
        color: var(--gold);
        font-weight: 500;
      }

      .bottom-info {
        background: var(--gray);
        border-top: 1px solid var(--border);
        padding: 12px 16px;
        font-size: 0.8em;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
      }

      .info-item.hidden {
        display: none;
      }

      .info-label {
        color: var(--text-dim);
      }

      .info-value {
        color: var(--gold);
        font-weight: 500;
      }

      @media (max-width: 768px) {
        .container {
          font-size: 13px;
        }

        .options-grid {
          grid-template-columns: 1fr;
        }

        .info-grid {
          grid-template-columns: 1fr;
        }
      }

      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      ::-webkit-scrollbar-thumb {
        background: rgba(220, 20, 60, 0.3);
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgba(220, 20, 60, 0.5);
      }

      * {
        -webkit-tap-highlight-color: transparent;
      }

      .modal-overlay {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        animation: fadeIn 0.2s ease-out;
      }

      .modal-overlay.active {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .modal-content {
        background: var(--dark-gray);
        border: 2px solid var(--blood-red);
        border-radius: 12px;
        padding: 24px;
        max-width: 400px;
        width: 100%;
        box-shadow: 0 8px 32px rgba(220, 20, 60, 0.3);
        animation: slideUp 0.3s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-title {
        font-size: 1.1em;
        font-weight: 600;
        color: var(--blood-red);
        margin-bottom: 12px;
        text-align: center;
      }

      .modal-message {
        color: var(--text-main);
        line-height: 1.6;
        margin-bottom: 20px;
        text-align: center;
        font-size: 0.95em;
      }

      .modal-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
      }

      .modal-btn {
        flex: 1;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }

      .modal-btn-confirm {
        background: linear-gradient(135deg, var(--blood-red), var(--dark-red));
        color: #fff;
      }

      .modal-btn-confirm:hover {
        box-shadow: 0 0 15px rgba(220, 20, 60, 0.5);
      }

      .modal-btn-cancel {
        background: var(--light-gray);
        color: var(--text-main);
      }

      .modal-btn-cancel:hover {
        background: var(--hover-bg);
      }

      @media (max-width: 768px) {
        .modal-content {
          padding: 20px;
        }

        .modal-buttons {
          flex-direction: column-reverse;
        }

        .modal-btn {
          width: 100%;
        }
      }
    </style>

    <div class="container">
      <div class="modal-overlay" id="confirmModal">
        <div class="modal-content">
          <div class="modal-title">ç¡®è®¤æ“ä½œ</div>
          <div class="modal-message">
            è¿™å°†è·³è¿‡ä¼´ä¾£å®šåˆ¶æµç¨‹ï¼Œç›´æ¥è¿›å…¥è®ºå›æµè§ˆæ¨¡å¼ã€‚
          </div>
          <div class="modal-buttons">
            <button class="modal-btn modal-btn-cancel" onclick="closeModal()">
              å–æ¶ˆ
            </button>
            <button
              class="modal-btn modal-btn-confirm"
              onclick="confirmViewForum()"
            >
              ç¡®è®¤
            </button>
          </div>
        </div>
      </div>

      <div class="header">
        <div class="header-content">
          <h1>å¦»æ‚¦è®ºå› - å®šåˆ¶ç³»ç»Ÿ</h1>
          <button class="theme-toggle" onclick="toggleTheme()">
            <span id="theme-icon">ğŸŒ™</span>
          </button>
        </div>
      </div>

      <div class="content">
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="page active" id="page0">
          <div class="page-title">æ¬¢è¿æ¥åˆ°å¦»æ‚¦è®ºå›</div>
          <div class="page-desc">
            è¿™é‡Œæ˜¯æ·«å¦»çˆ±å¥½è€…çš„ç§˜å¯†æ®ç‚¹<br />
            é¦–å…ˆé€‰æ‹©ä½ çš„èº«ä»½ï¼Œç„¶åå®šåˆ¶ä½ çš„å¥³ä¼´<br />
            æ¯ä¸€æ­¥çš„é€‰æ‹©éƒ½ä¼šè¢«è‡ªåŠ¨ä¿å­˜,éšæ—¶å¯ä»¥è¿”å›ä¿®æ”¹
          </div>

          <div class="page-desc" style="font-weight: 500; color: var(--gold); margin-bottom: 16px;">
            é€‰æ‹©ä½ çš„èº«ä»½
          </div>
          <div class="options-grid" id="identityGrid">
            <div class="option-card" onclick="selectIdentity('å¤«å¦»å…±åŒæ¢ç´¢', this)">
              <div class="icon">ğŸ’‘</div>
              <div class="label">å¤«å¦»å…±åŒæ¢ç´¢</div>
              <div class="desc">ä½ å’Œä¼´ä¾£ä¸€èµ·å‚ä¸æ·«å¦»æ´»åŠ¨,å…±åŒæ‹›å‹Ÿå•ç”·</div>
            </div>

            <div class="option-card" onclick="selectIdentity('NTRSçŒ®å¦»è€…', this)">
              <div class="icon">ğŸ­</div>
              <div class="label">NTRSçŒ®å¦»è€…</div>
              <div class="desc">ä½ ä¸»åŠ¨å°†ä¼´ä¾£çŒ®ç»™å•ç”·,äº«å—è¢«ç»¿çš„å¿«æ„Ÿ</div>
            </div>

            <div class="option-card" onclick="selectIdentity('è¢«NTRè‹¦ä¸»', this)">
              <div class="icon">ğŸ’”</div>
              <div class="label">è¢«NTRè‹¦ä¸»</div>
              <div class="desc">ä½ çš„ä¼´ä¾£èƒŒç€ä½ å‡ºè½¨,ä½ å°†é€æ¸å‘ç°çœŸç›¸</div>
            </div>

            <div class="option-card" onclick="selectIdentity('å¥³å•', this)">
              <div class="icon">ğŸ¦‹</div>
              <div class="label">å¥³å•</div>
              <div class="desc">ä½ çš„å¥³ä¼´ç‹¬è‡ªèƒŒç€ä½ åœ¨è®ºå›å¯»æ¬¢,ä½ æ¯«ä¸çŸ¥æƒ…</div>
            </div>
          </div>

          <div class="nav-buttons-stacked">
            <div class="nav-buttons-row">
              <button class="btn btn-next" id="nextBtn0" onclick="nextPage()" disabled>
                å¼€å§‹å®šåˆ¶
              </button>
              <button class="btn btn-submit" onclick="randomSelection()">
                ä¸€é”®éšæœº
              </button>
            </div>
            <button class="btn btn-prev" onclick="viewForum()">
              ä¸ï¼Œæˆ‘æƒ³å…ˆæŸ¥çœ‹è®ºå›
            </button>
          </div>
        </div>

        <div class="page" id="page1">
          <div class="page-title">å…³ç³»ç±»å‹</div>
          <div class="page-desc">ä½ å’Œå¥¹çš„å…³ç³»</div>
          <div style="margin-bottom: 16px;">
            <input type="text" class="custom-input" id="nameInput" placeholder="ç»™å¥¹èµ·ä¸ªåå­—ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ç”±AIç”Ÿæˆï¼‰" style="text-align: center;" oninput="selections.name = this.value.trim(); saveData();" />
          </div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectRelationshipType('å¥³æœ‹å‹', this)"
            >
              <div class="icon">ğŸ’•</div>
              <div class="label">å¥³æœ‹å‹</div>
              <div class="desc">æƒ…ä¾£å…³ç³»,æœªå©šçŠ¶æ€</div>
            </div>

            <div
              class="option-card"
              onclick="selectRelationshipType('å¦»å­', this)"
            >
              <div class="icon">ğŸ’</div>
              <div class="label">å¦»å­</div>
              <div class="desc">å¤«å¦»å…³ç³»,å·²å©šçŠ¶æ€</div>
            </div>

            <div
              class="option-card"
              onclick="selectRelationshipType('æ¯äº²', this)"
            >
              <div class="icon">ğŸ‘©â€ğŸ‘¦</div>
              <div class="label">æ¯äº²</div>
              <div class="desc">ä½ çš„æ¯äº²,å¥¹ä¸å•ç”·å‘ç”Ÿå…³ç³»</div>
            </div>

            <div
              class="option-card"
              onclick="selectRelationshipType('å¥³å„¿', this)"
            >
              <div class="icon">ğŸ‘§</div>
              <div class="label">å¥³å„¿</div>
              <div class="desc">ä½ çš„å¥³å„¿,å¥¹ä¸å•ç”·å·æƒ…</div>
            </div>

            <div class="option-card" onclick="selectCustomRelationshipType(this)">
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰å…³ç³»"
                onclick="event.stopPropagation()"
                id="customRelTypeInput"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons1">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn1"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page2">
          <div class="page-title">èº«æç±»å‹</div>
          <div class="page-desc">é€‰æ‹©ä½ æœ€å¿ƒåŠ¨çš„èº«æ</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('body', 'ä¸°æ»¡å¾¡å§', this)"
            >
              <div class="icon">ğŸ’ƒ</div>
              <div class="label">ä¸°æ»¡å¾¡å§</div>
              <div class="desc">å‰å‡¸åç¿˜,èƒ¸å¤§å±è‚¡ç¿˜,è‚‰æ„Ÿèº«æ</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('body', 'çº¤ç»†å°‘å¦‡', this)"
            >
              <div class="icon">ğŸŒ¸</div>
              <div class="label">çº¤ç»†å°‘å¦‡</div>
              <div class="desc">è‹—æ¡ç²ç‘,ç´§è‡´æ¸…çº¯</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('body', 'å¾®èƒ–äººå¦»', this)"
            >
              <div class="icon">ğŸ‘</div>
              <div class="label">å¾®èƒ–äººå¦»</div>
              <div class="desc">è‚‰æ„Ÿåè¶³,è½¯ç»µä¸°è…´</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('body', 'å¥ç¾è¾£å¦ˆ', this)"
            >
              <div class="icon">ğŸ’ª</div>
              <div class="label">å¥ç¾è¾£å¦ˆ</div>
              <div class="desc">ç´§è‡´æœ‰åŠ›,è‚Œè‚‰çº¿æ¡æ˜æ˜¾</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('body', 'å¨‡å°ç²ç‘', this)"
            >
              <div class="icon">ğŸ€</div>
              <div class="label">å¨‡å°ç²ç‘</div>
              <div class="desc">å°å·§ç²¾è‡´,æ¥šæ¥šåŠ¨äºº</div>
            </div>

            <div class="option-card" onclick="selectCustomOption('body', this)">
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰èº«æ"
                onclick="event.stopPropagation()"
                data-category="body"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons2">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn2"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page3">
          <div class="page-title">æ€§æ ¼ç‰¹è´¨</div>
          <div class="page-desc">å¥¹ä¼šæ˜¯ä»€ä¹ˆæ ·çš„äºº</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('personality', 'æ¸©æŸ”è´¤æƒ ', this)"
            >
              <div class="icon">ğŸ˜Š</div>
              <div class="label">æ¸©æŸ”è´¤æƒ </div>
              <div class="desc">ä½“è´´é¡ºä»,å–„è§£äººæ„</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('personality', 'é«˜å†·å‚²å¨‡', this)"
            >
              <div class="icon">ğŸ˜</div>
              <div class="label">é«˜å†·å‚²å¨‡</div>
              <div class="desc">è¡¨é¢çŸœæŒ,å†…å¿ƒç«çƒ­</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('personality', 'é£éªšæµªè¡', this)"
            >
              <div class="icon">ğŸ˜ˆ</div>
              <div class="label">é£éªšæµªè¡</div>
              <div class="desc">ä¸»åŠ¨çƒ­æƒ…,æ¬²æ±‚ä¸æ»¡</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('personality', 'æ¸…çº¯ä¿å®ˆ', this)"
            >
              <div class="icon">ğŸ˜³</div>
              <div class="label">æ¸…çº¯ä¿å®ˆ</div>
              <div class="desc">ç¾æ¶©å†…æ•›,å®¹æ˜“å®³ç¾</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('personality', 'çŸ¥æ€§ä¼˜é›…', this)"
            >
              <div class="icon">ğŸ“š</div>
              <div class="label">çŸ¥æ€§ä¼˜é›…</div>
              <div class="desc">æ°”è´¨å‡ºä¼—,è°ˆåä¸å‡¡</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('personality', 'ç‹¬ç«‹å¼ºåŠ¿', this)"
            >
              <div class="icon">ğŸ‘‘</div>
              <div class="label">ç‹¬ç«‹å¼ºåŠ¿</div>
              <div class="desc">ä¸»å¯¼å…³ç³»,æ˜ç¡®éœ€æ±‚</div>
            </div>

            <div
              class="option-card"
              onclick="selectCustomOption('personality', this)"
            >
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰æ€§æ ¼"
                onclick="event.stopPropagation()"
                data-category="personality"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons3">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn3"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page4">
          <div class="page-title">å¹´é¾„èŒƒå›´</div>
          <div class="page-desc">é€‰æ‹©æœ€å¸å¼•ä½ çš„å¹´é¾„æ®µ</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('age', '25-30å²', this)"
            >
              <div class="icon">ğŸŒ¹</div>
              <div class="label">25-30å²</div>
              <div class="desc">é’æ˜¥å°¾å·´,åˆšæˆå®¶ä¸ä¹…</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('age', '30-35å²', this)"
            >
              <div class="icon">ğŸ’‹</div>
              <div class="label">30-35å²</div>
              <div class="desc">æˆç†ŸéŸµå‘³,æ€§æ¬²æ—ºç››</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('age', '35-40å²', this)"
            >
              <div class="icon">ğŸ·</div>
              <div class="label">35-40å²</div>
              <div class="desc">é£éŸµçŠ¹å­˜,æŠ€æœ¯ä¸€æµ</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('age', '40-45å²', this)"
            >
              <div class="icon">ğŸ‘‘</div>
              <div class="label">40-45å²</div>
              <div class="desc">ç†Ÿé€èœœæ¡ƒ,æè‡´é­…åŠ›</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('age', '45å²ä»¥ä¸Š', this)"
            >
              <div class="icon">ğŸ’</div>
              <div class="label">45å²ä»¥ä¸Š</div>
              <div class="desc">è€ç»ƒå¦©åªš,èµ„æ·±ç†Ÿå¥³</div>
            </div>

            <div class="option-card" onclick="selectCustomOption('age', this)">
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰å¹´é¾„"
                onclick="event.stopPropagation()"
                data-category="age"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons4">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn4"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page5">
          <div class="page-title">å…³ç³»è®¾å®š</div>
          <div class="page-desc">å¥¹ä¸å•ç”·çš„å…³ç³»</div>
          <div class="options-grid" id="relationOptionsGrid">
            <div
              class="option-card"
              onclick="selectOption('relation', 'è®ºå›çº¦ç‚®', this)"
            >
              <div class="icon">ğŸ“±</div>
              <div class="label">è®ºå›çº¦ç‚®</div>
              <div class="desc">é€šè¿‡å¦»æ‚¦è®ºå›å¯»æ‰¾/è®¤è¯†å•ç”·</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'é‚»å±…å‹¾æ­', this)"
            >
              <div class="icon">ğŸ </div>
              <div class="label">é‚»å±…å‹¾æ­</div>
              <div class="desc">å•ç”·æ˜¯ä½åœ¨é™„è¿‘çš„é‚»å±…</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'æœ‹å‹å…³ç³»', this)"
            >
              <div class="icon">ğŸ¤</div>
              <div class="label">æœ‹å‹å…³ç³»</div>
              <div class="desc">å•ç”·æ˜¯ä½ ä»¬è®¤è¯†çš„æœ‹å‹</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'èŒåœºå…³ç³»', this)"
            >
              <div class="icon">ğŸ’¼</div>
              <div class="label">èŒåœºå…³ç³»</div>
              <div class="desc">å•ç”·æ˜¯å¥¹æˆ–ä½ çš„ä¸Šå¸/åŒäº‹</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'å‰ç”·å‹', this)"
            >
              <div class="icon">ğŸ’”</div>
              <div class="label">å‰ç”·å‹</div>
              <div class="desc">å•ç”·æ˜¯å¥¹çš„å‰ä»»</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'é™Œç”Ÿçº¦ç‚®', this)"
            >
              <div class="icon">ğŸ²</div>
              <div class="label">é™Œç”Ÿçº¦ç‚®</div>
              <div class="desc">ä¸å•ç”·æ­¤å‰æ— ä»»ä½•äº¤é›†</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('relation', 'ç†Ÿäººå·æƒ…', this)"
            >
              <div class="icon">ğŸ”¥</div>
              <div class="label">ç†Ÿäººå·æƒ…</div>
              <div class="desc">å•ç”·æ˜¯èº«è¾¹çš„ç†Ÿäºº,åŒäº‹/æœ‹å‹/é‚»å±…</div>
            </div>

            <div
              class="option-card"
              onclick="selectCustomOption('relation', this)"
            >
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰å…³ç³»"
                onclick="event.stopPropagation()"
                data-category="relation"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons5">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn5"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page6">
          <div class="page-title">èŒä¸šèº«ä»½</div>
          <div class="page-desc">å¥¹çš„ç¤¾ä¼šè§’è‰²</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('career', 'ç™½é¢†ä¸½äºº', this)"
            >
              <div class="icon">ğŸ‘”</div>
              <div class="label">ç™½é¢†ä¸½äºº</div>
              <div class="desc">èŒåœºç²¾è‹±,å¹²ç»ƒçŸ¥æ€§</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('career', 'å…¨èŒä¸»å¦‡', this)"
            >
              <div class="icon">ğŸ¡</div>
              <div class="label">å…¨èŒä¸»å¦‡</div>
              <div class="desc">ç›¸å¤«æ•™å­,æ¸©æŸ”è´¤æƒ </div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('career', 'æ•™å¸ˆ', this)"
            >
              <div class="icon">ğŸ“–</div>
              <div class="label">æ•™å¸ˆ</div>
              <div class="desc">ä¸ºäººå¸ˆè¡¨,æ–¯æ–‡è´¥ç±»</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('career', 'åŒ»æŠ¤äººå‘˜', this)"
            >
              <div class="icon">ğŸ’‰</div>
              <div class="label">åŒ»æŠ¤äººå‘˜</div>
              <div class="desc">ç™½è¡£å¤©ä½¿,åˆ¶æœè¯±æƒ‘</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('career', 'ä¼ä¸šè€æ¿', this)"
            >
              <div class="icon">ğŸ’°</div>
              <div class="label">ä¼ä¸šè€æ¿</div>
              <div class="desc">äº‹ä¸šæœ‰æˆ,å¼ºåŠ¿å¥³äºº</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('career', 'è‡ªç”±èŒä¸š', this)"
            >
              <div class="icon">ğŸ¨</div>
              <div class="label">è‡ªç”±èŒä¸š</div>
              <div class="desc">æ—¶é—´è‡ªç”±,ç”Ÿæ´»éšæ€§</div>
            </div>

            <div
              class="option-card"
              onclick="selectCustomOption('career', this)"
            >
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰èŒä¸š"
                onclick="event.stopPropagation()"
                data-category="career"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons6">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn6"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page7">
          <div class="page-title" id="lifeStatusTitle">ç”Ÿæ´»çŠ¶æ€</div>
          <div class="page-desc" id="lifeStatusDesc">
            æƒ…ä¾£/å¤«å¦»ä¸ºä½•è¿›å…¥æ·«å¦»åœˆ
          </div>
          <div class="options-grid" id="lifeStatusOptionsGrid">
          </div>

          <div class="nav-buttons" id="navButtons7">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn7"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page8">
          <div class="page-title">è¿‡å¾€ç»å†</div>
          <div class="page-desc">å¥¹çš„æ€§ç»éªŒä¸ç§˜å¯†</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'æ¸…çº¯å¥³å‹', this)"
            >
              <div class="icon">ğŸŒ¼</div>
              <div class="label">æ¸…çº¯å¥³å‹</div>
              <div class="desc">äº¤å¾€å‰å®ˆèº«,åªå’Œç”·æ–¹åšè¿‡</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'æ™®é€šç»å†', this)"
            >
              <div class="icon">ğŸ’•</div>
              <div class="label">æ™®é€šç»å†</div>
              <div class="desc">æœ‰è¿‡å‡ æ®µæ‹çˆ±,æ€§ç»éªŒä¸€èˆ¬</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'æ”¾è¡è¿‡å¾€', this)"
            >
              <div class="icon">ğŸ”¥</div>
              <div class="label">æ”¾è¡è¿‡å¾€</div>
              <div class="desc">æ€§ä¼´ä¾£ä¼—å¤š,æŠ€æœ¯å¨´ç†Ÿ</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'æ›¾ç»å‡ºè½¨', this)"
            >
              <div class="icon">ğŸ’”</div>
              <div class="label">æ›¾ç»å‡ºè½¨</div>
              <div class="desc">æ›¾èƒŒç€ç”·æ–¹å·æƒ…,å®¹æ˜“å†çŠ¯</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'è¢«è°ƒæ•™è¿‡', this)"
            >
              <div class="icon">ğŸ”—</div>
              <div class="label">è¢«è°ƒæ•™è¿‡</div>
              <div class="desc">æ›¾è¢«å…¶ä»–ç”·æ€§è°ƒæ•™,èº«ä½“å·²å¼€å‘</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('pastExperience', 'çº¦ç‚®è€æ‰‹', this)"
            >
              <div class="icon">ğŸ¯</div>
              <div class="label">çº¦ç‚®è€æ‰‹</div>
              <div class="desc">é•¿æœŸåœ¨è®ºå›æ´»åŠ¨,ç»éªŒä¸°å¯Œ</div>
            </div>

            <div
              class="option-card"
              onclick="selectCustomOption('pastExperience', this)"
            >
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰ç»å†"
                onclick="event.stopPropagation()"
                data-category="pastExperience"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons8">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn8"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page9">
          <div class="page-title" id="maleSettingTitle">ç”·æ–¹è®¾å®š</div>
          <div class="page-desc" id="maleSettingDesc">
            ç”·æ–¹åœ¨æ·«å¦»æ´»åŠ¨ä¸­çš„è§’è‰²
          </div>
          <div class="options-grid" id="maleSettingOptionsGrid">
          </div>

          <div class="nav-buttons" id="navButtons9">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn9"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page10">
          <div class="page-title">å¥¹çš„æ€§ç™–</div>
          <div class="page-desc">å¥¹åœ¨åºŠä¸Šçš„ç‰¹æ®Šå–œå¥½</div>
          <div class="options-grid">
            <div
              class="option-card"
              onclick="selectOption('herKink', 'è¢«åŠ¨æ‰¿å—', this)"
            >
              <div class="icon">ğŸ˜Œ</div>
              <div class="label">è¢«åŠ¨æ‰¿å—</div>
              <div class="desc">æ¸©é¡ºé…åˆ,ä»»å›é‡‡æ’·</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('herKink', 'ä¸»åŠ¨ç´¢å–', this)"
            >
              <div class="icon">ğŸ˜ˆ</div>
              <div class="label">ä¸»åŠ¨ç´¢å–</div>
              <div class="desc">æ¬²æ±‚ä¸æ»¡,ä¸»åŠ¨å‡ºå‡»</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('herKink', 'å£äº¤çˆ±å¥½', this)"
            >
              <div class="icon">ğŸ‘„</div>
              <div class="label">å£äº¤çˆ±å¥½</div>
              <div class="desc">æŠ€æœ¯ç²¾æ¹›,ä¹åœ¨å…¶ä¸­</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('herKink', 'ååº­å¼€å‘', this)"
            >
              <div class="icon">ğŸ‘</div>
              <div class="label">ååº­å¼€å‘</div>
              <div class="desc">ç¦å¿Œå¿«æ„Ÿ,æ¬²ç½¢ä¸èƒ½</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('herKink', 'å¤šäººè¿åŠ¨', this)"
            >
              <div class="icon">ğŸ‘¥</div>
              <div class="label">å¤šäººè¿åŠ¨</div>
              <div class="desc">åˆºæ¿€å‡çº§,ç¾¤äº¤ç‹‚æ¬¢</div>
            </div>

            <div
              class="option-card"
              onclick="selectOption('herKink', 'ä¸»å¯¼æŒæ§', this)"
            >
              <div class="icon">ğŸ‘ </div>
              <div class="label">ä¸»å¯¼æŒæ§</div>
              <div class="desc">å–œæ¬¢åœ¨æ€§çˆ±ä¸­å æ®ä¸»å¯¼</div>
            </div>

            <div
              class="option-card"
              onclick="selectCustomOption('herKink', this)"
            >
              <div class="icon">âœï¸</div>
              <div class="label">è‡ªå®šä¹‰</div>
              <input
                type="text"
                class="custom-input"
                placeholder="è¾“å…¥è‡ªå®šä¹‰æ€§ç™–"
                onclick="event.stopPropagation()"
                data-category="herKink"
              />
            </div>
          </div>

          <div class="nav-buttons" id="navButtons10">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn10"
              onclick="nextPage()"
              disabled
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page11">
          <div class="page-title" id="myKinkTitle">ä½ çš„æ€§ç™–</div>
          <div class="page-desc" id="myKinkDesc">ä½ åœ¨æ·«å¦»æ´»åŠ¨ä¸­çš„åå¥½</div>
          <div class="options-grid" id="myKinkOptionsGrid">
          </div>

          <div class="nav-buttons" id="navButtons11">
            <button class="btn btn-prev" onclick="prevPage()">ä¸Šä¸€æ­¥</button>
            <button
              class="btn btn-next"
              id="nextBtn11"
              onclick="nextPage()"
            >
              ä¸‹ä¸€æ­¥
            </button>
          </div>
        </div>

        <div class="page" id="page12">
          <div class="page-title">ç¡®è®¤ä¿¡æ¯</div>
          <div class="page-desc">æ£€æŸ¥ä½ çš„å®šåˆ¶å†…å®¹</div>
          <div class="summary-section">
            <div class="summary-item">
              <span class="summary-label">èº«ä»½</span>
              <span class="summary-value" id="summaryIdentity">-</span>
            </div>

            <div class="summary-item" id="summaryNameRow">
              <span class="summary-label">å¥¹çš„åå­—</span>
              <span class="summary-value" id="summaryName">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">å…³ç³»ç±»å‹</span>
              <span class="summary-value" id="summaryRelationshipType">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">èº«æç±»å‹</span>
              <span class="summary-value" id="summaryBody">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">æ€§æ ¼ç‰¹è´¨</span>
              <span class="summary-value" id="summaryPersonality">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">å¹´é¾„èŒƒå›´</span>
              <span class="summary-value" id="summaryAge">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">å…³ç³»è®¾å®š</span>
              <span class="summary-value" id="summaryRelation">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">èŒä¸šèº«ä»½</span>
              <span class="summary-value" id="summaryCareer">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">ç”Ÿæ´»çŠ¶æ€</span>
              <span class="summary-value" id="summaryLifeStatus">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">è¿‡å¾€ç»å†</span>
              <span class="summary-value" id="summaryPastExperience">-</span>
            </div>

            <div class="summary-item" id="summaryMaleSettingRow">
              <span class="summary-label">ç”·æ–¹è®¾å®š</span>
              <span class="summary-value" id="summaryMaleSetting">-</span>
            </div>

            <div class="summary-item">
              <span class="summary-label">å¥¹çš„æ€§ç™–</span>
              <span class="summary-value" id="summaryHerKink">-</span>
            </div>

            <div class="summary-item" id="summaryMyKinkRow">
              <span class="summary-label">ä½ çš„æ€§ç™–</span>
              <span class="summary-value" id="summaryMyKink">-</span>
            </div>
          </div>

          <div class="nav-buttons-stacked">
            <div class="nav-buttons-row">
              <button class="btn btn-prev" onclick="prevPage()">
                è¿”å›ä¿®æ”¹
              </button>
              <button class="btn btn-submit" onclick="submitSelection()">
                å¼€å§‹æ¸¸æˆ
              </button>
            </div>
            <button class="btn btn-next" onclick="randomSelection()">
              é‡æ–°éšæœº
            </button>
          </div>
        </div>
      </div>

      <div class="bottom-info">
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">èº«ä»½</span>
            <span class="info-value" id="infoIdentity">-</span>
          </div>

          <div class="info-item" id="infoNameRow">
            <span class="info-label">å¥¹çš„åå­—</span>
            <span class="info-value" id="infoName">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">å…³ç³»ç±»å‹</span>
            <span class="info-value" id="infoRelationshipType">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">èº«æ</span>
            <span class="info-value" id="infoBody">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">æ€§æ ¼</span>
            <span class="info-value" id="infoPersonality">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">å¹´é¾„</span>
            <span class="info-value" id="infoAge">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">å…³ç³»</span>
            <span class="info-value" id="infoRelation">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">èŒä¸š</span>
            <span class="info-value" id="infoCareer">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">ç”Ÿæ´»çŠ¶æ€</span>
            <span class="info-value" id="infoLifeStatus">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">è¿‡å¾€ç»å†</span>
            <span class="info-value" id="infoPastExperience">-</span>
          </div>

          <div class="info-item" id="infoMaleSettingRow">
            <span class="info-label">ç”·æ–¹è®¾å®š</span>
            <span class="info-value" id="infoMaleSetting">-</span>
          </div>

          <div class="info-item">
            <span class="info-label">å¥¹çš„æ€§ç™–</span>
            <span class="info-value" id="infoHerKink">-</span>
          </div>

          <div class="info-item" id="infoMyKinkRow">
            <span class="info-label">ä½ çš„æ€§ç™–</span>
            <span class="info-value" id="infoMyKink">-</span>
          </div>
        </div>
      </div>

    </div>

    <script>
      let currentPage = 0;
      const totalPages = 13;
      const selections = {
        identity: "",
        name: "",
        relationshipType: "",
        body: "",
        personality: "",
        age: "",
        relation: "",
        career: "",
        lifeStatus: "",
        pastExperience: "",
        maleSetting: "",
        herKink: "",
        myKink: "",
      };

      function isPassiveIdentity() {
        return selections.identity === "è¢«NTRè‹¦ä¸»" || selections.identity === "å¥³å•";
      }

      // ç”Ÿæ´»çŠ¶æ€é€‰é¡¹é…ç½®ï¼ˆåŸºäºèº«ä»½ï¼‰
      const lifeStatusOptions = {
        active: [
          {
            value: "ä¸»åŠ¨çŒ®å‡º",
            icon: "ğŸ­",
            desc: "ä½ æœ‰çª¥è§†ç™–,ä¸»åŠ¨åœ¨è®ºå›å‘å¸–æ‹›å‹Ÿå•ç”·",
          },
          {
            value: "å…±åŒæ¢ç´¢",
            icon: "ğŸ’‘",
            desc: "ä½ ä»¬éƒ½å¯¹æ·«å¦»ç©æ³•æ„Ÿå…´è¶£,å…±åŒæ‹›å‹Ÿå•ç”·",
          },
          {
            value: "æ¬²æ±‚ä¸æ»¡",
            icon: "ğŸ”¥",
            desc: "ä½ æ€§èƒ½åŠ›ä¸è¶³,å¥¹ä¸»åŠ¨æå‡ºæ‰¾å•ç”·",
          },
          {
            value: "æ€‚æ¿è¯±å¯¼",
            icon: "ğŸ˜ˆ",
            desc: "ä½ é•¿æœŸæ´—è„‘,å¥¹åŠæ¨åŠå°±æ¥å—",
          },
          {
            value: "ç»æµäº¤æ¢",
            icon: "ğŸ’¸",
            desc: "ç»æµå›°éš¾,ä½ é»˜è®¸å¥¹ç”¨èº«ä½“æ¢é’±",
          },
        ],
        passive: [
          {
            value: "èƒŒå›å·æƒ…",
            icon: "ğŸ¤«",
            desc: "å¥¹èƒŒç€ä½ ,ç‹¬è‡ªåœ¨è®ºå›çº¦ç‚®",
          },
          {
            value: "çº¯ç²¹å¯»æ¬¢",
            icon: "ğŸ¦‹",
            desc: "å¥¹æ€§æ¬²æ—ºç››,ä¸»åŠ¨æ‹›å‹Ÿå•ç”·æ»¡è¶³éœ€æ±‚",
          },
          {
            value: "æŠ¥å¤å‡ºè½¨",
            icon: "ğŸ’”",
            desc: "å¥¹å‘ç°ä½ å‡ºè½¨æˆ–å†·è½å¥¹,ä»¥æ­¤æŠ¥å¤",
          },
          {
            value: "è¢«äººå‹¾å¼•",
            icon: "ğŸ˜ˆ",
            desc: "å¥¹è¢«å…¶ä»–ç”·äººä¸»åŠ¨å‹¾å¼•,é€æ¸æ²¦é™·",
          },
        ],
      };

      const maleSettingOptions = {
        active: [
          { value: "æ—è§‚å‹", icon: "ğŸ‘ï¸", desc: "ä½ å…¨ç¨‹è§‚çœ‹,äº«å—è§†è§‰åˆºæ¿€" },
          { value: "åŠæ”¾å…»å‹", icon: "ğŸ“¹", desc: "ä½ ä¸åœ¨åœºä½†è¦æ±‚å½•åˆ¶" },
          { value: "å®Œå…¨æ”¾å…»å‹", icon: "ğŸšª", desc: "ä½ ä¸ç›‘æ§,åªè¦æ±‚äº‹åå£è¿°" },
          { value: "å‚ä¸å‹", icon: "ğŸ‘¥", desc: "ä½ å’Œå•ç”·ä¸€èµ·,äº«å—3P" },
          { value: "å—è™å‹", icon: "ğŸ˜”", desc: "ä½ äº«å—è¢«ç¾è¾±,ç”šè‡³èˆ”ç²¾" },
        ],
        passive: [
          { value: "ä¸çŸ¥æƒ…å‹", icon: "â“", desc: "ä½ å®Œå…¨ä¸çŸ¥é“å¥¹çš„è¡Œä¸º" },
          { value: "é€æ¸å‘ç°å‹", icon: "ğŸ”", desc: "ä»è››ä¸é©¬è¿¹ä¸­é€æ¸å¯Ÿè§‰çœŸç›¸" },
        ],
      };

      const myKinkOptions = {
        active: [
          { value: "çª¥è§†å¿«æ„Ÿ", icon: "ğŸ‘ï¸", desc: "äº«å—è§‚çœ‹ä¼´ä¾£è¢«ä»–äººæ“å¼„çš„è§†è§‰åˆºæ¿€" },
          { value: "ç¾è¾±å—è™", icon: "ğŸ˜”", desc: "äº«å—è¢«å•ç”·ç¾è¾±ã€è¢«ä¼´ä¾£å«Œå¼ƒçš„å±ˆè¾±å¿«æ„Ÿ" },
          { value: "åˆ†äº«ç‚«è€€", icon: "ğŸ†", desc: "äº«å—å°†ä¼´ä¾£çš„ç¾å¥½è‚‰ä½“å±•ç¤ºç»™ä»–äºº" },
          { value: "æ‹æ‘„è®°å½•", icon: "ğŸ“¹", desc: "é•œå¤´è§è¯,ç•™ä¸‹è¯æ®" },
          { value: "ä¸çŸ¥æƒ…", icon: "â”", desc: "æ²¡æœ‰ç‰¹åˆ«çš„ç™–å¥½åå‘" },
        ],
        passive: [
          { value: "å«‰å¦’ç—›è‹¦", icon: "ğŸ’”", desc: "åœ¨ç—›è‹¦å’Œå«‰å¦’ä¸­è·å¾—æ‰­æ›²çš„å¿«æ„Ÿ" },
          { value: "æš—ä¸­è·Ÿè¸ª", icon: "ğŸ•µï¸", desc: "å·å·è·Ÿè¸ªä¼´ä¾£,ç›®ç¹å¥¹ä¸å•ç”·çš„å·æƒ…ç°åœº" },
          { value: "è‡ªæˆ‘æ€€ç–‘", icon: "ğŸ˜°", desc: "åœ¨ä¼´ä¾£çš„å˜åŒ–ä¸­åå¤çº ç»“,æ€€ç–‘è‡ªå·±çš„é­…åŠ›" },
          { value: "ä¸çŸ¥æƒ…", icon: "â”", desc: "å¯¹ä¸€åˆ‡æ¯«æ— å¯Ÿè§‰,ç”Ÿæ´»å¦‚å¸¸" },
        ],
      };

      function selectIdentity(value, element) {
        const parent = element.parentElement;
        parent.querySelectorAll(".option-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        selections.identity = value;
        selections.lifeStatus = "";
        selections.maleSetting = "";
        selections.myKink = "";
        saveData();
        const btn = document.getElementById("nextBtn0");
        if (btn) {
          btn.disabled = false;
        }
      }

      function clearAllData() {
        localStorage.removeItem("wifeSelection");
        Object.keys(selections).forEach((key) => (selections[key] = ""));
        const nameInput = document.getElementById("nameInput");
        if (nameInput) nameInput.value = "";
        updateBottomInfo();
      }

      function saveData() {
        localStorage.setItem("wifeSelection", JSON.stringify(selections));
        updateBottomInfo();
      }

      function updateProgress() {
        const progress = (currentPage / (totalPages - 1)) * 100;
        document.getElementById("progressBar").style.width = progress + "%";
      }

      function showPage(pageNum) {
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
        });
        document.getElementById("page" + pageNum).classList.add("active");
        currentPage = pageNum;
        updateProgress();

        if (pageNum === 7) {
          generateLifeStatusOptions();
        }

        if (pageNum === 9) {
          generateMaleSettingOptions();
        }

        if (pageNum === 11) {
          generateMyKinkOptions();
        }

        if (pageNum === 12) {
          updateSummary();
        }
      }

      function nextPage() {
        if (currentPage < totalPages - 1) {
          showPage(currentPage + 1);
        }
      }

      function prevPage() {
        if (currentPage > 0) {
          showPage(currentPage - 1);
        }
      }

      function scrollToNavButtons() {
        const navButtons = document.getElementById("navButtons" + currentPage);
        if (navButtons) {
          navButtons.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      }

      function selectRelationshipType(value, element) {
        const parent = element.parentElement;
        parent.querySelectorAll(".option-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        selections.relationshipType = value;

        saveData();
        const btn = document.getElementById("nextBtn1");
        if (btn) {
          btn.disabled = false;
        }

        setTimeout(scrollToNavButtons, 100);
      }

      function selectCustomRelationshipType(element) {
        const parent = element.parentElement;
        parent.querySelectorAll(".option-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        const input = element.querySelector(".custom-input");
        input.focus();
        const btn = document.getElementById("nextBtn1");

        input.addEventListener("input", function () {
          const value = this.value.trim();
          if (value) {
            selections.relationshipType = value;
            saveData();
            if (btn) btn.disabled = false;
          } else {
            selections.relationshipType = "";
            if (btn) btn.disabled = true;
          }
        });

        if (input.value.trim()) {
          selections.relationshipType = input.value.trim();
          saveData();
          if (btn) btn.disabled = false;
        }
        setTimeout(scrollToNavButtons, 100);
      }

      function selectOption(category, value, element) {
        const parent = element.parentElement;
        parent.querySelectorAll(".option-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        selections[category] = value;
        saveData();
        const btnId = "nextBtn" + currentPage;
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.disabled = false;
        }
        setTimeout(scrollToNavButtons, 100);
      }

      function selectCustomOption(category, element) {
        const parent = element.parentElement;
        parent.querySelectorAll(".option-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        const input = element.querySelector(".custom-input");
        input.focus();

        const btnId = "nextBtn" + currentPage;
        const btn = document.getElementById(btnId);

        input.addEventListener("input", function () {
          const value = this.value.trim();
          if (value) {
            selections[category] = value;
            saveData();
            if (btn) {
              btn.disabled = false;
            }
          } else {
            selections[category] = "";
            if (btn) {
              btn.disabled = true;
            }
          }
        });

        if (input.value.trim()) {
          selections[category] = input.value.trim();
          saveData();
          if (btn) {
            btn.disabled = false;
          }
        }
        setTimeout(scrollToNavButtons, 100);
      }

      function generateLifeStatusOptions() {
        const passive = isPassiveIdentity();
        const options = passive
          ? lifeStatusOptions.passive
          : lifeStatusOptions.active;
        const grid = document.getElementById("lifeStatusOptionsGrid");
        const title = document.getElementById("lifeStatusTitle");
        const desc = document.getElementById("lifeStatusDesc");

        if (passive) {
          title.textContent = "å‡ºè½¨åŠ¨æœº";
          desc.textContent = "å¥¹ä¸ºä½•èƒŒç€ä½ å‡ºè½¨";
        } else {
          title.textContent = "ç”Ÿæ´»çŠ¶æ€";
          desc.textContent = "ä½ ä»¬ä¸ºä½•è¿›å…¥æ·«å¦»åœˆ";
        }

        let html = "";
        options.forEach((opt) => {
          const isSelected =
            selections.lifeStatus === opt.value ? "selected" : "";
          html += `
            <div class="option-card ${isSelected}" onclick="selectOption('lifeStatus', '${opt.value}', this)">
              <div class="icon">${opt.icon}</div>
              <div class="label">${opt.value}</div>
              <div class="desc">${opt.desc}</div>
            </div>
          `;
        });

        html += `
          <div class="option-card" onclick="selectCustomOption('lifeStatus', this)">
            <div class="icon">âœï¸</div>
            <div class="label">è‡ªå®šä¹‰</div>
            <input
              type="text"
              class="custom-input"
              placeholder="è¾“å…¥è‡ªå®šä¹‰çŠ¶æ€"
              onclick="event.stopPropagation()"
              data-category="lifeStatus"
            />
          </div>
        `;

        grid.innerHTML = html;

        const btn = document.getElementById("nextBtn7");
        if (btn) {
          btn.disabled = !selections.lifeStatus;
        }
      }

      function generateMaleSettingOptions() {
        const passive = isPassiveIdentity();
        const options = passive
          ? maleSettingOptions.passive
          : maleSettingOptions.active;
        const grid = document.getElementById("maleSettingOptionsGrid");
        const title = document.getElementById("maleSettingTitle");
        const desc = document.getElementById("maleSettingDesc");

        if (passive) {
          title.textContent = "ä½ çš„çŠ¶æ€";
          desc.textContent = "ä½ å¯¹å¥¹å‡ºè½¨çš„çŸ¥æƒ…ç¨‹åº¦";
        } else {
          title.textContent = "ä½ çš„è§’è‰²";
          desc.textContent = "ä½ åœ¨æ·«å¦»æ´»åŠ¨ä¸­æ‰®æ¼”çš„è§’è‰²";
        }

        let html = "";
        options.forEach((opt) => {
          const isSelected =
            selections.maleSetting === opt.value ? "selected" : "";
          html += `
            <div class="option-card ${isSelected}" onclick="selectOption('maleSetting', '${opt.value}', this)">
              <div class="icon">${opt.icon}</div>
              <div class="label">${opt.value}</div>
              <div class="desc">${opt.desc}</div>
            </div>
          `;
        });

        html += `
          <div class="option-card" onclick="selectCustomOption('maleSetting', this)">
            <div class="icon">âœï¸</div>
            <div class="label">è‡ªå®šä¹‰</div>
            <input
              type="text"
              class="custom-input"
              placeholder="è¾“å…¥è‡ªå®šä¹‰è®¾å®š"
              onclick="event.stopPropagation()"
              data-category="maleSetting"
            />
          </div>
        `;

        grid.innerHTML = html;

        const btn = document.getElementById("nextBtn9");
        if (btn) {
          btn.disabled = !selections.maleSetting;
        }
      }

      function generateMyKinkOptions() {
        const passive = isPassiveIdentity();
        const options = passive
          ? myKinkOptions.passive
          : myKinkOptions.active;
        const grid = document.getElementById("myKinkOptionsGrid");
        const title = document.getElementById("myKinkTitle");
        const desc = document.getElementById("myKinkDesc");

        if (passive) {
          title.textContent = "ä½ çš„å¿ƒç†";
          desc.textContent = "ä½ åœ¨ä¸çŸ¥æƒ…ä¸­çš„å¿ƒç†çŠ¶æ€";
        } else {
          title.textContent = "ä½ çš„æ€§ç™–";
          desc.textContent = "ä½ åœ¨æ·«å¦»æ´»åŠ¨ä¸­çš„åå¥½";
        }

        let html = "";
        options.forEach((opt) => {
          const isSelected =
            selections.myKink === opt.value ? "selected" : "";
          html += `
            <div class="option-card ${isSelected}" onclick="selectOption('myKink', '${opt.value}', this)">
              <div class="icon">${opt.icon}</div>
              <div class="label">${opt.value}</div>
              <div class="desc">${opt.desc}</div>
            </div>
          `;
        });

        html += `
          <div class="option-card" onclick="selectCustomOption('myKink', this)">
            <div class="icon">âœï¸</div>
            <div class="label">è‡ªå®šä¹‰</div>
            <input
              type="text"
              class="custom-input"
              placeholder="è¾“å…¥è‡ªå®šä¹‰åå¥½"
              onclick="event.stopPropagation()"
              data-category="myKink"
            />
          </div>
        `;

        grid.innerHTML = html;
      }

      function updateSummary() {
        const passive = isPassiveIdentity();

        document.getElementById("summaryIdentity").textContent =
          selections.identity || "-";

        const nameRow = document.getElementById("summaryNameRow");
        if (nameRow) {
          if (selections.name) {
            nameRow.classList.remove("hidden");
            document.getElementById("summaryName").textContent = selections.name;
          } else {
            nameRow.classList.add("hidden");
          }
        }

        document.getElementById("summaryRelationshipType").textContent =
          selections.relationshipType || "-";
        document.getElementById("summaryBody").textContent =
          selections.body || "-";
        document.getElementById("summaryPersonality").textContent =
          selections.personality || "-";
        document.getElementById("summaryAge").textContent =
          selections.age || "-";
        document.getElementById("summaryRelation").textContent =
          selections.relation || "-";
        document.getElementById("summaryCareer").textContent =
          selections.career || "-";
        document.getElementById("summaryLifeStatus").textContent =
          selections.lifeStatus || "-";
        document.getElementById("summaryPastExperience").textContent =
          selections.pastExperience || "-";
        document.getElementById("summaryMaleSetting").textContent =
          selections.maleSetting || "-";
        document.getElementById("summaryHerKink").textContent =
          selections.herKink || "-";
        document.getElementById("summaryMyKink").textContent =
          selections.myKink || "-";

        const maleSettingRow = document.getElementById("summaryMaleSettingRow");
        if (maleSettingRow) {
          const label = maleSettingRow.querySelector(".summary-label");
          if (passive) {
            label.textContent = "ä½ çš„çŠ¶æ€";
          } else {
            label.textContent = "ä½ çš„è§’è‰²";
          }
        }

        const myKinkRow = document.getElementById("summaryMyKinkRow");
        if (myKinkRow) {
          const label = myKinkRow.querySelector(".summary-label");
          if (passive) {
            label.textContent = "ä½ çš„å¿ƒç†";
          } else {
            label.textContent = "ä½ çš„æ€§ç™–";
          }
        }
      }

      function updateBottomInfo() {
        const passive = isPassiveIdentity();

        document.getElementById("infoIdentity").textContent =
          selections.identity || "-";

        const infoNameRow = document.getElementById("infoNameRow");
        if (infoNameRow) {
          if (selections.name) {
            infoNameRow.classList.remove("hidden");
            document.getElementById("infoName").textContent = selections.name;
          } else {
            infoNameRow.classList.add("hidden");
          }
        }

        document.getElementById("infoRelationshipType").textContent =
          selections.relationshipType || "-";
        document.getElementById("infoBody").textContent =
          selections.body || "-";
        document.getElementById("infoPersonality").textContent =
          selections.personality || "-";
        document.getElementById("infoAge").textContent = selections.age || "-";
        document.getElementById("infoRelation").textContent =
          selections.relation || "-";
        document.getElementById("infoCareer").textContent =
          selections.career || "-";
        document.getElementById("infoLifeStatus").textContent =
          selections.lifeStatus || "-";
        document.getElementById("infoPastExperience").textContent =
          selections.pastExperience || "-";
        document.getElementById("infoMaleSetting").textContent =
          selections.maleSetting || "-";
        document.getElementById("infoHerKink").textContent =
          selections.herKink || "-";
        document.getElementById("infoMyKink").textContent =
          selections.myKink || "-";

        const maleSettingRow = document.getElementById("infoMaleSettingRow");
        if (maleSettingRow) {
          const label = maleSettingRow.querySelector(".info-label");
          if (passive) {
            label.textContent = "ä½ çš„çŠ¶æ€";
          } else {
            label.textContent = "ä½ çš„è§’è‰²";
          }
        }

        const myKinkRow = document.getElementById("infoMyKinkRow");
        if (myKinkRow) {
          const label = myKinkRow.querySelector(".info-label");
          if (passive) {
            label.textContent = "ä½ çš„å¿ƒç†";
          } else {
            label.textContent = "ä½ çš„æ€§ç™–";
          }
        }
      }

      function submitSelection() {
        const passive = isPassiveIdentity();

        showInfoModal(
          "å¼€å§‹æ¸¸æˆ",
          "å‡†å¤‡ç”Ÿæˆå†…å®¹...<br><br>å»ºè®®åœ¨AIç”Ÿæˆå®Œæ¯•åï¼Œæ‰‹åŠ¨åˆ·æ–°ç½‘é¡µä»¥éšè—é¦–æ¥¼",
          function () {
            const namePart = selections.name ? `å¥¹å«${selections.name},` : "";
            const myKinkPart = selections.myKink
              ? (passive ? `,æˆ‘çš„å¿ƒç†çŠ¶æ€æ˜¯${selections.myKink}` : `,æˆ‘çš„æ€§ç™–æ˜¯${selections.myKink}`)
              : "";
            let message;
            if (passive) {
              message = `ã€å¼€å§‹é€‰æ‹©ã€‘æˆ‘çš„èº«ä»½æ˜¯${selections.identity}ã€‚${namePart}å¥¹æ˜¯æˆ‘çš„${selections.relationshipType},${selections.body}ã€${selections.personality}ã€å¹´é¾„åœ¨${selections.age}ã€èŒä¸šæ˜¯${selections.career},æˆ‘å’Œå¥¹çš„å…³ç³»è®¾å®šæ˜¯${selections.relation}ã€‚å¥¹å‡ºè½¨çš„åŸå› æ˜¯${selections.lifeStatus},å¥¹çš„è¿‡å¾€ç»å†æ˜¯${selections.pastExperience},æˆ‘çš„çŠ¶æ€æ˜¯${selections.maleSetting}ã€‚å¥¹çš„æ€§ç™–æ˜¯${selections.herKink}${myKinkPart}ã€‚ä¸¥æ ¼æŒ‰ç…§<status_current_variables>ä¸­çš„ç­‰çº§å’Œ<wife_forum_glossary>çš„å†…å®¹è¿›è¡Œåˆ›ä½œå¹¶ç”Ÿæˆçº¦ç‚®å¸–ã€‚`;
            } else {
              message = `ã€å¼€å§‹é€‰æ‹©ã€‘æˆ‘çš„èº«ä»½æ˜¯${selections.identity}ã€‚${namePart}å¥¹æ˜¯æˆ‘çš„${selections.relationshipType},${selections.body}ã€${selections.personality}ã€å¹´é¾„åœ¨${selections.age}ã€èŒä¸šæ˜¯${selections.career},æˆ‘å’Œå¥¹çš„å…³ç³»è®¾å®šæ˜¯${selections.relation}ã€‚æˆ‘ä»¬è¿›å…¥æ·«å¦»åœˆçš„åŸå› æ˜¯${selections.lifeStatus},å¥¹çš„è¿‡å¾€ç»å†æ˜¯${selections.pastExperience},æˆ‘åœ¨æ·«å¦»æ´»åŠ¨ä¸­çš„è§’è‰²æ˜¯${selections.maleSetting}ã€‚å¥¹çš„æ€§ç™–æ˜¯${selections.herKink}${myKinkPart}ã€‚ä¸¥æ ¼æŒ‰ç…§<status_current_variables>ä¸­çš„ç­‰çº§å’Œ<wife_forum_glossary>çš„å†…å®¹è¿›è¡Œåˆ›ä½œå¹¶ç”Ÿæˆçº¦ç‚®å¸–ã€‚`;
            }
            const command = `/send ${message} | /trigger`;
            if (typeof triggerSlash === "function") {
              triggerSlash(command);
              clearAllData();
            } else {
              alert("æäº¤å¤±è´¥:æœªæ£€æµ‹åˆ°SillyTavernç¯å¢ƒ");
            }
          }
        );
      }

      function viewForum() {
        document.getElementById("confirmModal").classList.add("active");
      }

      function closeModal() {
        document.getElementById("confirmModal").classList.remove("active");
      }

      function confirmViewForum() {
        closeModal();
        showInfoModal(
          "æŸ¥çœ‹è®ºå›",
          "å‡†å¤‡è¿›å…¥è®ºå›...<br><br>å»ºè®®åœ¨AIç”Ÿæˆå®Œæ¯•åï¼Œæ‰‹åŠ¨åˆ·æ–°ç½‘é¡µä»¥éšè—é¦–æ¥¼",
          function () {
            const message = `æ‰“å¼€è®ºå›`;
            const command = `/send ${message} | /trigger`;
            if (typeof triggerSlash === "function") {
              triggerSlash(command);
            } else {
              alert("æäº¤å¤±è´¥:æœªæ£€æµ‹åˆ°SillyTavernç¯å¢ƒ");
            }
          }
        );
      }

      function showInfoModal(title, message, callback) {
        const modal = document.getElementById("confirmModal");
        const modalTitle = modal.querySelector(".modal-title");
        const modalMessage = modal.querySelector(".modal-message");
        const modalButtons = modal.querySelector(".modal-buttons");

        modalTitle.textContent = title;
        modalMessage.innerHTML = message;
        modalButtons.innerHTML =
          '<button class="modal-btn modal-btn-confirm" onclick="closeInfoModal()">çŸ¥é“äº†</button>';

        modal.classList.add("active");

        window.infoModalCallback = callback;
      }

      function closeInfoModal() {
        const modal = document.getElementById("confirmModal");
        modal.classList.remove("active");

        if (window.infoModalCallback) {
          window.infoModalCallback();
          window.infoModalCallback = null;
        }

        setTimeout(() => {
          const modalTitle = modal.querySelector(".modal-title");
          const modalMessage = modal.querySelector(".modal-message");
          const modalButtons = modal.querySelector(".modal-buttons");

          modalTitle.textContent = "ç¡®è®¤æ“ä½œ";
          modalMessage.innerHTML =
            "è¿™å°†è·³è¿‡ä¼´ä¾£å®šåˆ¶æµç¨‹ï¼Œç›´æ¥è¿›å…¥è®ºå›æµè§ˆæ¨¡å¼ã€‚";
          modalButtons.innerHTML =
            '<button class="modal-btn modal-btn-cancel" onclick="closeModal()">å–æ¶ˆ</button><button class="modal-btn modal-btn-confirm" onclick="confirmViewForum()">ç¡®è®¤</button>';
        }, 300);
      }

      function randomSelection() {
        const options = {
          identity: ["å¤«å¦»å…±åŒæ¢ç´¢", "NTRSçŒ®å¦»è€…", "è¢«NTRè‹¦ä¸»", "å¥³å•"],
          relationshipType: ["å¥³æœ‹å‹", "å¦»å­", "æ¯äº²", "å¥³å„¿"],
          body: ["ä¸°æ»¡å¾¡å§", "çº¤ç»†å°‘å¦‡", "å¾®èƒ–äººå¦»", "å¥ç¾è¾£å¦ˆ", "å¨‡å°ç²ç‘"],
          personality: [
            "æ¸©æŸ”è´¤æƒ ",
            "é«˜å†·å‚²å¨‡",
            "é£éªšæµªè¡",
            "æ¸…çº¯ä¿å®ˆ",
            "çŸ¥æ€§ä¼˜é›…",
            "ç‹¬ç«‹å¼ºåŠ¿",
          ],
          age: ["25-30å²", "30-35å²", "35-40å²", "40-45å²", "45å²ä»¥ä¸Š"],
          relation: [
            "è®ºå›çº¦ç‚®",
            "é‚»å±…å‹¾æ­",
            "æœ‹å‹å…³ç³»",
            "èŒåœºå…³ç³»",
            "å‰ç”·å‹",
            "é™Œç”Ÿçº¦ç‚®",
            "ç†Ÿäººå·æƒ…",
          ],
          career: [
            "ç™½é¢†ä¸½äºº",
            "å…¨èŒä¸»å¦‡",
            "æ•™å¸ˆ",
            "åŒ»æŠ¤äººå‘˜",
            "ä¼ä¸šè€æ¿",
            "è‡ªç”±èŒä¸š",
          ],
          pastExperience: [
            "æ¸…çº¯å¥³å‹",
            "æ™®é€šç»å†",
            "æ”¾è¡è¿‡å¾€",
            "æ›¾ç»å‡ºè½¨",
            "è¢«è°ƒæ•™è¿‡",
            "çº¦ç‚®è€æ‰‹",
          ],
        };

        const personalityBehaviorMap = {
          æ¸©æŸ”è´¤æƒ : {
            herKink: ["è¢«åŠ¨æ‰¿å—", "å£äº¤çˆ±å¥½"],
            activeLifeStatus: ["ä¸»åŠ¨çŒ®å‡º", "å…±åŒæ¢ç´¢", "æ€‚æ¿è¯±å¯¼"],
            passiveLifeStatus: ["èƒŒå›å·æƒ…"],
          },
          é«˜å†·å‚²å¨‡: {
            herKink: ["è¢«åŠ¨æ‰¿å—", "ä¸»åŠ¨ç´¢å–", "ååº­å¼€å‘"],
            activeLifeStatus: ["å…±åŒæ¢ç´¢", "æ€‚æ¿è¯±å¯¼", "ç»æµäº¤æ¢"],
            passiveLifeStatus: ["æŠ¥å¤å‡ºè½¨", "èƒŒå›å·æƒ…"],
          },
          é£éªšæµªè¡: {
            herKink: ["ä¸»åŠ¨ç´¢å–", "å£äº¤çˆ±å¥½", "ååº­å¼€å‘", "å¤šäººè¿åŠ¨"],
            activeLifeStatus: ["å…±åŒæ¢ç´¢", "æ¬²æ±‚ä¸æ»¡", "ç»æµäº¤æ¢"],
            passiveLifeStatus: ["çº¯ç²¹å¯»æ¬¢", "è¢«äººå‹¾å¼•"],
          },
          æ¸…çº¯ä¿å®ˆ: {
            herKink: ["è¢«åŠ¨æ‰¿å—"],
            activeLifeStatus: ["ä¸»åŠ¨çŒ®å‡º", "æ€‚æ¿è¯±å¯¼"],
            passiveLifeStatus: ["èƒŒå›å·æƒ…"],
          },
          çŸ¥æ€§ä¼˜é›…: {
            herKink: ["è¢«åŠ¨æ‰¿å—", "ä¸»åŠ¨ç´¢å–", "å£äº¤çˆ±å¥½"],
            activeLifeStatus: ["å…±åŒæ¢ç´¢", "ä¸»åŠ¨çŒ®å‡º"],
            passiveLifeStatus: ["çº¯ç²¹å¯»æ¬¢", "æŠ¥å¤å‡ºè½¨"],
          },
          ç‹¬ç«‹å¼ºåŠ¿: {
            herKink: ["ä¸»åŠ¨ç´¢å–", "ä¸»å¯¼æŒæ§", "å¤šäººè¿åŠ¨"],
            activeLifeStatus: ["å…±åŒæ¢ç´¢", "æ¬²æ±‚ä¸æ»¡"],
            passiveLifeStatus: ["çº¯ç²¹å¯»æ¬¢", "è¢«äººå‹¾å¼•"],
          },
        };

        Object.keys(options).forEach((key) => {
          selections[key] =
            options[key][Math.floor(Math.random() * options[key].length)];
        });

        const passive = isPassiveIdentity();
        const personality = selections.personality;
        const behaviorMap =
          personalityBehaviorMap[personality] ||
          personalityBehaviorMap["é£éªšæµªè¡"];

        if (passive) {
          const passiveLifeStatusOptions =
            behaviorMap.passiveLifeStatus ||
            lifeStatusOptions.passive.map((o) => o.value);
          selections.lifeStatus =
            passiveLifeStatusOptions[
              Math.floor(Math.random() * passiveLifeStatusOptions.length)
            ];

          const passiveMaleOpts = maleSettingOptions.passive.map((o) => o.value);
          selections.maleSetting =
            passiveMaleOpts[Math.floor(Math.random() * passiveMaleOpts.length)];
        } else {
          const activeLifeStatusOptions =
            behaviorMap.activeLifeStatus ||
            lifeStatusOptions.active.map((o) => o.value);
          selections.lifeStatus =
            activeLifeStatusOptions[
              Math.floor(Math.random() * activeLifeStatusOptions.length)
            ];

          const maleSettingOpts = [
            "æ—è§‚å‹",
            "åŠæ”¾å…»å‹",
            "å®Œå…¨æ”¾å…»å‹",
            "å‚ä¸å‹",
            "å—è™å‹",
          ];
          selections.maleSetting =
            maleSettingOpts[Math.floor(Math.random() * maleSettingOpts.length)];
        }

        const herKinkOpts = behaviorMap.herKink || ["è¢«åŠ¨æ‰¿å—", "ä¸»åŠ¨ç´¢å–"];
        selections.herKink =
          herKinkOpts[Math.floor(Math.random() * herKinkOpts.length)];

        const myKinkOpts = passive
          ? myKinkOptions.passive.map((o) => o.value)
          : myKinkOptions.active.map((o) => o.value);
        selections.myKink =
          myKinkOpts[Math.floor(Math.random() * myKinkOpts.length)];

        if (!passive && selections.herKink === "ä¸»å¯¼æŒæ§" && Math.random() > 0.5) {
          selections.myKink = "ç¾è¾±å—è™";
        }

        saveData();

        document.querySelectorAll(".page").forEach((page) => {
          page.querySelectorAll(".option-card").forEach((card) => {
            card.classList.remove("selected");
          });
        });

        showPage(12);
      }

      function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById("theme-icon");
        if (body.getAttribute("data-theme") === "light") {
          body.removeAttribute("data-theme");
          icon.textContent = "ğŸŒ™";
        } else {
          body.setAttribute("data-theme", "light");
          icon.textContent = "â˜€ï¸";
        }
      }

      document.querySelectorAll(".custom-input").forEach((input) => {
        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") {
            e.preventDefault();
            const category = this.getAttribute("data-category");
            if (category && this.value.trim()) {
              selections[category] = this.value.trim();
              saveData();
              nextPage();
            }
            if (this.id === "customRelTypeInput" && this.value.trim()) {
              selections.relationshipType = this.value.trim();
              saveData();
              nextPage();
            }
          }
        });
      });

      updateProgress();
      updateBottomInfo();
    </script>
  </body>
</html>
